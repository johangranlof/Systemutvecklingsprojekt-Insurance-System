<Window
    x:Class="Presentation.Views.MainView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Presentation.Views"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:Presentation.ViewModels"
    Title="ISS Insurance Support System"
    Width="1400"
    Height="800"
    MinWidth="1400"
    MinHeight="800"
    Background="#C8D9E6"
    Style="{StaticResource MaterialDesignWindow}"
    WindowStartupLocation="CenterScreen"
    WindowState="Maximized"
    mc:Ignorable="d">
    <Window.DataContext>
        <vm:MainVM />
    </Window.DataContext>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Border
            VerticalAlignment="Stretch"
            Background="White"
            CornerRadius="0,10,10,0">
            <Grid Grid.Column="0">
                <StackPanel>
                    <Image
                        Width="80"
                        Margin="15,20,0,0"
                        Source="pack://application:,,,/Images/ISS.png" />
                    <Border
                        Width="50"
                        Height="50"
                        Margin="0,20,0,0"
                        Background="#FF283593"
                        CornerRadius="70">

                        <TextBlock
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            FontSize="20"
                            Foreground="White"
                            Text="{Binding EmployeeInitials}" />
                    </Border>
                    <TextBlock
                        Margin="5,10,0,0"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="14"
                        Text="{Binding EmployeeName}" />
                    <TextBlock
                        Margin="2,5,2,30"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        FontSize="12"
                        Foreground="LightGray"
                        Text="{Binding UserPermission, StringFormat='{}{0} på Toppförsäkringar'}"
                        TextAlignment="Center"
                        TextWrapping="Wrap" />
                    <ItemsControl ItemsSource="{Binding MenuItems}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <RadioButton
                                    Width="200"
                                    HorizontalContentAlignment="Left"
                                    Command="{Binding CommandName}"
                                    Cursor="Hand"
                                    IsChecked="{Binding IsChecked, Mode=TwoWay}"
                                    IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                    Style="{StaticResource MaterialDesignTabRadioButtonRight}">
                                    <StackPanel Orientation="Horizontal">
                                        <materialDesign:PackIcon VerticalAlignment="Center" Kind="{Binding Icon}" />
                                        <TextBlock Margin="10,0,0,0" Text="{Binding Name}" />
                                    </StackPanel>
                                </RadioButton>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
                <Button
                    Height="50"
                    Margin="20"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Bottom"
                    Command="{Binding LogoutCommand}"
                    Style="{StaticResource MaterialDesignRaisedDarkButton}">

                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon VerticalAlignment="Center" Kind="Logout" />
                        <TextBlock Margin="10,0,0,0" Text="Logga ut" />

                    </StackPanel>
                </Button>
            </Grid>
        </Border>

        <Grid Grid.Column="1">
            <Border
                Margin="20"
                Padding="0"
                Background="White"
                CornerRadius="10,10,10,10">
                <ContentControl Margin="10" Content="{Binding CurrentView}" />
            </Border>
        </Grid>
        <Grid
            x:Name="Overlay"
            Grid.ColumnSpan="2"
            Background="#80000000">
            <Grid.Style>
                <Style TargetType="Grid">
                    <Setter Property="Visibility" Value="Collapsed" />
                    <Style.Triggers>
                        <DataTrigger Binding="{Binding IsOverlayVisible}" Value="True">
                            <Setter Property="Visibility" Value="Visible" />
                        </DataTrigger>
                    </Style.Triggers>
                </Style>
            </Grid.Style>
        </Grid>
    </Grid>
</Window>
