
<UserControl
    x:Class="Presentation.Views.Controls.EmployeeDetailsUC"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:helpers="clr-namespace:Presentation.Helpers"
    xmlns:local="clr-namespace:Presentation.Views.Controls"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="800"
    d:DesignWidth="1150"
    Background="White"
    DataContext="{Binding EmployeeDetailsVM}"
    mc:Ignorable="d">

    <UserControl.Resources>
        <helpers:PercentageConverter x:Key="PercentageConverter" />
    </UserControl.Resources>

    <Grid Margin="30">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="50" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBlock>
            <Hyperlink Command="{Binding BackCommand}" Style="{StaticResource MaterialDesignBody2Hyperlink}">
                ← Återgå
            </Hyperlink>
        </TextBlock>
        <materialDesign:Snackbar
            x:Name="SnackbarOne"
            Grid.Row="1"
            VerticalAlignment="Top"
            Panel.ZIndex="100"
            Background="#EDEDED"
            Foreground="Black"
            IsActive="{Binding IsSnackbarActive}"
            Message="{Binding SnackbarMessage}" />
        <TextBlock
            Margin="0,0,0,20"
            HorizontalAlignment="Center"
            FontSize="24"
            FontWeight="Bold"
            Text="Visa anställd" />
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            <Border
                Height="200"
                Margin="0,110,10,0"
                VerticalAlignment="Top"
                BorderBrush="LightGray"
                BorderThickness="1"
                CornerRadius="10,10,10,10">
                <StackPanel
                    Margin="10"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Orientation="Vertical">
                    <StackPanel Margin="0,0,0,10" Orientation="Horizontal">
                        <TextBlock
                            Margin="0,0,5,0"
                            FontSize="16"
                            FontWeight="Bold"
                            Text="{Binding Employee.FirstName}" />
                        <TextBlock
                            FontSize="16"
                            FontWeight="Bold"
                            Text="{Binding Employee.LastName}" />
                    </StackPanel>
                    <StackPanel Margin="0,0,0,5" Orientation="Vertical">
                        <TextBlock FontWeight="Bold" Text="Anställningsnummer" />
                        <TextBlock Margin="5,0,0,0" Text="{Binding Employee.EmployeeNumber}" />
                    </StackPanel>
                    <StackPanel Margin="0,0,0,5" Orientation="Vertical">
                        <TextBlock FontWeight="Bold" Text="Personnummer" />
                        <TextBlock Margin="5,0,0,0" Text="{Binding Employee.SSN}" />
                    </StackPanel>
                </StackPanel>
            </Border>
            <TabControl Grid.Column="1">
                <TabItem Cursor="Hand" Header="Anställd Info">
                    <StackPanel Margin="10">
                        <StackPanel
                            Margin="0,0,0,10"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Margin="0,0,10,0"
                                Command="{Binding RemovePopUpCommand}"
                                CommandParameter="{Binding Employee}"
                                IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                Style="{StaticResource MaterialDesignPaperDarkButton}"
                                ToolTip="Resource name: MaterialDesignPaperDarkButton">

                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon VerticalAlignment="Center" Kind="TrashCanOutline" />
                                    <TextBlock Margin="10,0,0,0" Text="Ta bort" />
                                </StackPanel>
                            </Button>
                            <CheckBox
                                x:Name="EditEmployee"
                                IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}"
                                ToolTip="Resource name: MaterialDesignRaisedLightDarkButton">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon VerticalAlignment="Center" Kind="AccountEdit" />
                                    <TextBlock Margin="10,0,0,0" Text="Redigera" />
                                </StackPanel>
                            </CheckBox>
                        </StackPanel>
                        <Separator Margin="0,10,0,10" />
                        <TextBlock
                            Margin="0,0,0,10"
                            FontSize="14"
                            FontWeight="Bold"
                            Text="Kontaktuppgifter" />
                        <Grid Margin="10,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <StackPanel
                                Margin="0,0,5,10"
                                HorizontalAlignment="Left"
                                Orientation="Vertical">
                                <TextBlock FontWeight="Bold" Text="Telefonnummer" />
                                <TextBox
                                    Width="250"
                                    VerticalAlignment="Top"
                                    materialDesign:TextFieldAssist.HasLeadingIcon="True"
                                    materialDesign:TextFieldAssist.LeadingIcon="Phone"
                                    AcceptsReturn="True"
                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                    Text="{Binding PhoneNumber, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                            <StackPanel
                                Grid.Column="1"
                                Margin="5,0,0,0"
                                HorizontalAlignment="Left"
                                Orientation="Vertical">
                                <TextBlock FontWeight="Bold"><Run Language="sv-se" Text="Mejl" /></TextBlock>
                                <TextBox
                                    Width="250"
                                    VerticalAlignment="Top"
                                    materialDesign:TextFieldAssist.HasLeadingIcon="True"
                                    materialDesign:TextFieldAssist.LeadingIcon="Email"
                                    AcceptsReturn="True"
                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                    Text="{Binding Email, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                        </Grid>
                        <TextBlock
                            Margin="0,10,0,10"
                            FontSize="14"
                            FontWeight="Bold"
                            Text="Adress" />
                        <Grid Margin="10,0,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <StackPanel
                                Margin="0,0,5,10"
                                HorizontalAlignment="Left"
                                Orientation="Vertical">
                                <TextBlock FontWeight="Bold" Text="Gatuadress" />
                                <TextBox
                                    Width="250"
                                    VerticalAlignment="Top"
                                    AcceptsReturn="True"
                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                    Text="{Binding StreetAddress, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                            <StackPanel
                                Grid.Column="1"
                                Margin="5,0,0,0"
                                HorizontalAlignment="Left"
                                Orientation="Vertical">
                                <TextBlock FontWeight="Bold" Text="Postnummer" />
                                <TextBox
                                    Width="250"
                                    VerticalAlignment="Top"
                                    AcceptsReturn="True"
                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                    Text="{Binding ZipCode, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                            <StackPanel
                                Grid.Column="2"
                                Margin="5,0,0,0"
                                HorizontalAlignment="Left"
                                Orientation="Vertical">
                                <TextBlock FontWeight="Bold" Text="Ort" />
                                <TextBox
                                    Width="250"
                                    VerticalAlignment="Top"
                                    AcceptsReturn="True"
                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                    Text="{Binding City, Mode=TwoWay, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged, NotifyOnValidationError=True}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                        </Grid>
                        <TextBlock
                            Margin="0,10,0,0"
                            FontSize="14"
                            FontWeight="Bold"
                            Text="Jobbtitel" />
                        <Grid Margin="10,10,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <TextBlock
                                Grid.Column="0"
                                FontWeight="Bold"
                                Text="Roll" />
                            <TextBlock
                                Grid.Column="1"
                                FontWeight="Bold"
                                Text="Agenturnummer" />
                            <TextBlock
                                Grid.Column="2"
                                FontWeight="Bold"
                                Text="Sysselsättningsgrad" />
                        </Grid>
                        <ItemsControl ItemsSource="{Binding EmployeeRoles}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Grid Margin="10,0,0,10">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="*" />
                                        </Grid.ColumnDefinitions>
                                        <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                                            <TextBox
                                                Width="250"
                                                VerticalAlignment="Top"
                                                AcceptsReturn="True"
                                                IsEnabled="false"
                                                Style="{StaticResource MaterialDesignFilledTextBox}"
                                                Text="{Binding Role.Name}"
                                                TextWrapping="Wrap"
                                                ToolTip="Går ej att redigera"
                                                ToolTipService.ShowOnDisabled="True" />
                                        </StackPanel>
                                        <StackPanel
                                            Grid.Column="1"
                                            HorizontalAlignment="Left"
                                            Orientation="Vertical">
                                            <TextBox
                                                Width="250"
                                                VerticalAlignment="Top"
                                                AcceptsReturn="True"
                                                IsEnabled="false"
                                                Style="{StaticResource MaterialDesignFilledTextBox}"
                                                Text="{Binding AgentNumber}"
                                                TextWrapping="Wrap"
                                                ToolTip="Går ej att redigera"
                                                ToolTipService.ShowOnDisabled="True" />
                                        </StackPanel>
                                        <StackPanel
                                            Grid.Column="2"
                                            HorizontalAlignment="Left"
                                            Orientation="Vertical">
                                            <ComboBox
                                                Width="250"
                                                VerticalAlignment="Top"
                                                IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                                ItemsSource="{Binding DataContext.EmploymentPercentages, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                                SelectedItem="{Binding EmploymentRate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                Style="{StaticResource MaterialDesignFilledComboBox}">
                                                <ComboBox.ItemTemplate>
                                                    <DataTemplate>
                                                        <TextBlock Text="{Binding Converter={StaticResource PercentageConverter}}" />
                                                    </DataTemplate>
                                                </ComboBox.ItemTemplate>
                                            </ComboBox>
                                        </StackPanel>
                                    </Grid>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <StackPanel
                            Margin="0,10,0,0"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Width="auto"
                                Margin="5"
                                HorizontalAlignment="Right"
                                Command="{Binding AddEmployeeRoleCommand}"
                                Content="Lägg till jobbtitel"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                            <Button
                                Width="auto"
                                Command="{Binding UpdateEmployeeCommand}"
                                Content="Spara"
                                IsEnabled="{Binding Path=IsChecked, ElementName=EditEmployee}"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}" />
                        </StackPanel>
                    </StackPanel>
                </TabItem>
                <TabItem Cursor="Hand" Header="Inloggning">
                    <StackPanel Margin="10">
                        <StackPanel
                            Margin="0,0,0,10"
                            HorizontalAlignment="Right"
                            Orientation="Horizontal">
                            <Button
                                Margin="0,0,10,0"
                                Command="{Binding AddUserViewCommand}"
                                IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon VerticalAlignment="Center" Kind="AccountPlus" />
                                    <TextBlock Margin="10,0,0,0" Text="Lägg till användare" />
                                </StackPanel>
                            </Button>
                            <CheckBox
                                x:Name="EditUser"
                                IsEnabled="{Binding DataContext.ControlsEnabled, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                                Style="{StaticResource MaterialDesignRaisedDarkButton}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon VerticalAlignment="Center" Kind="Key" />
                                    <TextBlock Margin="10,0,0,0" Text="Redigera" />
                                </StackPanel>
                            </CheckBox>
                        </StackPanel>
                        <Separator Margin="0,10,0,10" />
                        <StackPanel>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="105" />
                                </Grid.ColumnDefinitions>
                                <TextBlock
                                    Grid.Column="0"
                                    FontWeight="Bold"
                                    Text="Användarnamn:" />
                                <TextBlock
                                    Grid.Column="1"
                                    FontWeight="Bold"
                                    Text="Behörighet:" />
                                <TextBlock
                                    Grid.Column="2"
                                    FontWeight="Bold"
                                    Text="Lösenord:" />
                                <TextBlock Grid.Column="3" />
                            </Grid>
                            <ItemsControl ItemsSource="{Binding Users}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <Grid Margin="0,0,0,10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="auto" />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel HorizontalAlignment="Left" Orientation="Vertical">
                                                <TextBox
                                                    Width="200"
                                                    VerticalAlignment="Top"
                                                    AcceptsReturn="True"
                                                    IsEnabled="false"
                                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                                    Text="{Binding Username}"
                                                    TextWrapping="Wrap"
                                                    ToolTip="Går ej att redigera"
                                                    ToolTipService.ShowOnDisabled="True" />
                                            </StackPanel>
                                            <StackPanel
                                                Grid.Column="1"
                                                HorizontalAlignment="Left"
                                                Orientation="Vertical">
                                                <TextBox
                                                    Width="200"
                                                    VerticalAlignment="Top"
                                                    AcceptsReturn="True"
                                                    IsEnabled="false"
                                                    Style="{StaticResource MaterialDesignFilledTextBox}"
                                                    Text="{Binding Permission}"
                                                    TextWrapping="Wrap"
                                                    ToolTip="Går ej att redigera"
                                                    ToolTipService.ShowOnDisabled="True" />
                                            </StackPanel>
                                            <StackPanel
                                                Grid.Column="2"
                                                HorizontalAlignment="Left"
                                                Orientation="Vertical">
                                                <PasswordBox
                                                    Name="PasswordBox"
                                                    Width="200"
                                                    VerticalAlignment="Top"
                                                    materialDesign:HintAssist.Hint="Lösenord"
                                                    materialDesign:PasswordBoxAssist.IsPasswordRevealed="False"
                                                    materialDesign:PasswordBoxAssist.Password="{Binding Password, Mode=TwoWay}"
                                                    materialDesign:TextFieldAssist.HasClearButton="True"
                                                    materialDesign:TextFieldAssist.HasLeadingIcon="True"
                                                    materialDesign:TextFieldAssist.LeadingIcon="Key"
                                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditUser}"
                                                    Style="{StaticResource MaterialDesignFilledRevealPasswordBox}" />
                                            </StackPanel>
                                            <StackPanel
                                                Grid.Column="3"
                                                Margin="0,0,10,0"
                                                HorizontalAlignment="Right"
                                                Orientation="Vertical">
                                                <Button
                                                    Command="{Binding DataContext.RemoveUserCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                    CommandParameter="{Binding}"
                                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditUser}"
                                                    Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}"
                                                    ToolTip="Ta bort användare">
                                                    <materialDesign:PackIcon Kind="TrashCanOutline" />
                                                </Button>
                                            </StackPanel>
                                            <StackPanel
                                                Grid.Column="4"
                                                Margin="0,0,20,0"
                                                Orientation="Vertical">
                                                <Button
                                                    Command="{Binding DataContext.UpdatePasswordCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                                    CommandParameter="{Binding}"
                                                    IsEnabled="{Binding Path=IsChecked, ElementName=EditUser}"
                                                    Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}"
                                                    ToolTip="Spara ändringar">
                                                    <materialDesign:PackIcon Kind="ContentSaveAll" />
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>
                            <StackPanel Margin="0,10,0,0" HorizontalAlignment="Right" />
                        </StackPanel>
                    </StackPanel>
                </TabItem>
            </TabControl>
        </Grid>
    </Grid>
</UserControl>







